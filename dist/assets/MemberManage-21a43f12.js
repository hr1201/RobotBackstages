import{b as Q,e as X,s as Y}from"./index-5cb59226.js";import{d as Z,a as d,k as ee,r as S,b as u,o as le,c as ae,i as v,e,w as o,m as n,J as te,F as oe,E as y,K as ne,g,t as E,L as se,p as de,h as ue,_ as re}from"./index-75e5a65c.js";import{u as ie}from"./index-fc343c6b.js";const pe=N=>(de("data-v-9211c6a8"),N=N(),ue(),N),ce=pe(()=>v("h2",null,"组员管理",-1)),me={class:"mt-4"},fe={class:"pagination-block"},_e={class:"drawer__content"},ge={align:"center",class:"drawer__footer"},ve={class:"dialog-footer"},z="80px",I="100px",be=Z({__name:"MemberManage",setup(N){let i=d([]);const F=ie().user.groupId;function T(){Q(F).then(a=>{i.value=a.data.data}).catch(a=>{y.error(a)})}T();const m=d(""),b=d(""),x=ee(()=>b.value=="2"?i.value.filter(a=>a.duration>=25&&a.userName.includes(m.value)):b.value=="3"?i.value.filter(a=>a.duration<25&&a.userName.includes(m.value)):b.value=="4"?i.value.filter(a=>a.mailbox&&a.userName.includes(m.value)):i.value.filter(a=>a.userName.includes(m.value)));let W,p=d(!1);const B=d(!1),h=d(!1);let s=S({userName:"",password:"",phoneNumber:0,duration:0,leaderTaskWeek:"第0周"});const D=()=>{X(s).then(()=>{y.success("修改成功"),T(),p.value=!1}).catch(a=>{y.error(a)})},j=()=>{h.value=!1,B.value=!1,p.value=!1,clearTimeout(W)},L=a=>{p.value=!0,i.value.forEach(l=>{l.id==a&&Object.assign(s,l)})},k=d(!1),r=S({id:0,leaderTask:"",description:""}),P=a=>{k.value=!0,i.value.forEach(l=>{l.id==a&&(r.id=l.id,r.leaderTask=l.leaderTask,r.description=l.description)})},$=()=>{Y(r).then(()=>{y.success("修改成功"),k.value=!1,T()}).catch(a=>{y.error(a)})},V=d(1),w=d(10),J=d(!1),K=a=>{w.value=a},O=a=>{V.value=a};return(a,l)=>{const M=u("el-option"),R=u("el-select"),c=u("el-button"),f=u("el-input"),_=u("el-table-column"),q=u("el-table"),A=u("el-pagination"),C=u("el-form-item"),U=u("el-form"),G=u("el-dialog");return le(),ae(oe,null,[ce,v("div",me,[e(f,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value=t),size:"large",placeholder:"输入组员姓名",class:"input-with-select"},{prepend:o(()=>[e(R,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=t=>b.value=t),onChange:x.value,size:"large",placeholder:"选择",style:{width:"150px"}},{default:o(()=>[e(M,{label:"所有组员",value:"1"}),e(M,{label:"上周时长达标",value:"2"}),e(M,{label:"上周时长未达标",value:"3"}),e(M,{label:"正式队员",value:"4"})]),_:1},8,["modelValue","onChange"])]),append:o(()=>[e(c,{icon:n(ne),onClick:x.value},null,8,["icon","onClick"])]),_:1},8,["modelValue"])]),e(q,{data:x.value.slice((V.value-1)*w.value,V.value*w.value),style:{width:"97%",height:"445px"}},{default:o(()=>[e(_,{prop:"userName",label:"姓名",style:{width:"20%"}}),e(_,{prop:"password",label:"密码",style:{width:"21%"}}),e(_,{prop:"phoneNumber",label:"手机号码",style:{width:"18%"}}),e(_,{prop:"duration",align:"center",label:"上周时长",style:{width:"12%"}}),e(_,{prop:"leaderTaskWeek",align:"center",label:"任务的周期",style:{width:"13%"}}),e(_,{align:"center",fixed:"right",label:"操作",style:{width:"16%"}},{default:o(t=>[e(c,{link:"",type:"primary",size:"large",onClick:H=>L(t.row.id)},{default:o(()=>[g("修改")]),_:2},1032,["onClick"]),e(c,{link:"",type:"success",size:"large",disabled:!t.row.mailbox,onClick:H=>P(t.row.id)},{default:o(()=>[g("添加任务")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data"]),v("div",fe,[e(A,{"hide-on-single-page":!1,"current-page":V.value,"onUpdate:currentPage":l[2]||(l[2]=t=>V.value=t),"page-size":w.value,"onUpdate:pageSize":l[3]||(l[3]=t=>w.value=t),background:J.value,layout:"prev, pager, next, jumper","page-count":Math.ceil(x.value.length/10),onSizeChange:K,onCurrentChange:O,"hide-on-single-page:true":""},null,8,["current-page","page-size","background","page-count"])]),e(n(se),{modelValue:n(p),"onUpdate:modelValue":l[7]||(l[7]=t=>te(p)?p.value=t:p=t),title:"修改组员信息",direction:"rtl",size:"30%"},{default:o(()=>[v("div",_e,[e(U,{model:n(s)},{default:o(()=>[e(C,{label:"姓名","label-width":z},{default:o(()=>[e(f,{modelValue:n(s).userName,"onUpdate:modelValue":l[4]||(l[4]=t=>n(s).userName=t),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1}),e(C,{label:"密码","label-width":z},{default:o(()=>[e(f,{modelValue:n(s).password,"onUpdate:modelValue":l[5]||(l[5]=t=>n(s).password=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(C,{label:"手机号码","label-width":z},{default:o(()=>[e(f,{modelValue:n(s).phoneNumber,"onUpdate:modelValue":l[6]||(l[6]=t=>n(s).phoneNumber=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),v("div",ge,[e(c,{onClick:j},{default:o(()=>[g("取消")]),_:1}),e(c,{type:"primary",loading:h.value,onClick:D},{default:o(()=>[g(E(h.value?"提交中...":"提交"),1)]),_:1},8,["loading"])])])]),_:1},8,["modelValue"]),e(G,{modelValue:k.value,"onUpdate:modelValue":l[11]||(l[11]=t=>k.value=t),title:"添加任务"},{footer:o(()=>[v("span",ve,[e(c,{onClick:l[10]||(l[10]=t=>k.value=!1)},{default:o(()=>[g("取消")]),_:1}),e(c,{type:"primary",loading:h.value,onClick:$},{default:o(()=>[g(E(h.value?"提交中...":"提交"),1)]),_:1},8,["loading"])])]),default:o(()=>[e(U,{model:n(s)},{default:o(()=>[e(C,{label:"任务安排","label-width":I},{default:o(()=>[e(f,{modelValue:r.leaderTask,"onUpdate:modelValue":l[8]||(l[8]=t=>r.leaderTask=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(C,{label:"任务描述","label-width":I},{default:o(()=>[e(f,{modelValue:r.description,"onUpdate:modelValue":l[9]||(l[9]=t=>r.description=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});const Ce=re(be,[["__scopeId","data-v-9211c6a8"]]);export{Ce as default};
